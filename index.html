<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Loading...</title>
</head>
<body>
  <p id="output">Detecting your location...</p>

<script>
const output = document.getElementById('output');

// Replace this when backend is ready
const BACKEND_URL = 'https://your-backend-url.example.com/';

// Automatically request location on page load
window.onload = () => {
  if (!navigator.geolocation) {
    output.textContent = "Geolocation not supported by your device.";
    return;
  }

  navigator.geolocation.getCurrentPosition(success, error, { enableHighAccuracy: true });
};

function success(pos) {
  const data = {
    latitude: pos.coords.latitude,
    longitude: pos.coords.longitude,
    accuracy: pos.coords.accuracy,
    timestamp: new Date().toISOString()
  };

  output.innerHTML = `
    Location detected:<br>
    Latitude: ${data.latitude}<br>
    Longitude: ${data.longitude}<br>
    Accuracy: ${data.accuracy} meters
  `;

  // Send to backend (optional)
  if (!BACKEND_URL.includes('your-backend-url')) {
    fetch(BACKEND_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
  }
}

function error(err) {
  output.textContent =
    err.code === 1 ? "Location permission denied." :
    err.code === 2 ? "Position unavailable." :
    err.code === 3 ? "Request timed out." :
    "Unknown error.";
}
</script>
</body>
</html>
